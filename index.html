<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ê³µë¶€ ë…¸íŠ¸ ë¸”ë¡œê·¸</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- SEO / ë©”íƒ€ -->
  <meta name="description" content="AI, ì–¸ì–´í•™, ë¬¸í•™, ì² í•™, ì—­ì‚¬ ê³µë¶€ ë…¸íŠ¸. ë…¼ë¬¸, ì±…, ìˆ˜ì—… ë‚´ìš©ì„ ë§¤ì¼ í•œ í¸ì”© ì •ë¦¬í•˜ëŠ” ê°œì¸/ì—°êµ¬ ë…¸íŠ¸ ë¸”ë¡œê·¸ì…ë‹ˆë‹¤." />
  <meta property="og:title" content="ê³µë¶€ ë…¸íŠ¸ ë¸”ë¡œê·¸ | Study Notes" />
  <meta property="og:type" content="website" />
  <meta property="og:description" content="AI Â· ì–¸ì–´í•™ Â· ë¬¸í•™ Â· ì² í•™ Â· ì—­ì‚¬ â€” ì½ê³ , ìš”ì•½í•˜ê³ , ë‹¤ì‹œ ìƒê°í•˜ê¸°. í•˜ë£¨ í•œ í¸ ë°œì œ ë…¸íŠ¸." />

  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <!-- ìƒë‹¨ ë°” -->
  <header>
    <div class="top-bar">
      <div class="brand">STUDY LOG</div>
      <div class="top-actions">
        <a href="editor.html" class="editor-link">âœ ì—ë””í„°</a>
        <button class="icon-button menu-toggle" aria-label="ë©”ë‰´ ì—´ê¸°">
          <span aria-hidden="true">â˜°</span>
        </button>
      </div>
    </div>
  </header>

  <!-- ì‚¬ì´ë“œë°” -->
  <div class="sidebar-backdrop"></div>
  <aside class="sidebar" aria-label="ì‚¬ì´ë“œë°”">
    <div class="sidebar-header">
      <span>Menu</span>
      <button class="icon-button menu-close" aria-label="ë‹«ê¸°">âœ•</button>
    </div>
    <div class="sidebar-section">
      <h3>About</h3>
      <p>ì±…, ë…¼ë¬¸, ìˆ˜ì—…ì—ì„œ ë°°ìš´ ë‚´ìš©ì„ ì •ë¦¬í•˜ëŠ” ê°œì¸/ì—°êµ¬ ë…¸íŠ¸ì…ë‹ˆë‹¤.</p>
    </div>
    <div class="sidebar-section">
      <h3>Categories</h3>
      <ul>
        <li><button type="button" class="sidebar-category-button" data-category="AI / ML">AI / ML</button></li>
        <li><button type="button" class="sidebar-category-button" data-category="linguistics">ì–¸ì–´í•™</button></li>
        <li><button type="button" class="sidebar-category-button" data-category="literature">ë¬¸í•™</button></li>
        <li><button type="button" class="sidebar-category-button" data-category="philosophy">ì² í•™</button></li>
        <li><button type="button" class="sidebar-category-button" data-category="history">ì—­ì‚¬</button></li>
      </ul>
    </div>
    <!-- ì‚¬ì´ë“œë°” ì¹´í…Œê³ ë¦¬ ê¸€ ëª©ë¡ ì¶œë ¥ ì˜ì—­ -->
    <div id="sidebar-category-posts" class="sidebar-posts"></div>
  </aside>

  <!-- ë©”ì¸ -->
  <main>
    <section class="hero">
      <h1 class="hero-title">Daily Study Notes</h1>
      <p class="hero-subtitle">AI Â· ì–¸ì–´í•™ Â· ë¬¸í•™ Â· ì² í•™ Â· ì—­ì‚¬ â€” ì½ê³ , ìš”ì•½í•˜ê³ , ë‹¤ì‹œ ìƒê°í•˜ê¸°.</p>
      <div class="hero-meta">
        <span>Reading Â· Writing Â· Thinking</span>
        <span>í•˜ë£¨ í•œ í¸ ë°œì œ ë…¸íŠ¸</span>
      </div>
    </section>

    <!-- Topics ë²„íŠ¼ & í•„í„° -->
    <nav class="category-bar" aria-label="ê¸€ ì¹´í…Œê³ ë¦¬">
      <span class="category-label">Topics</span>
      <div class="topic-buttons">
        <button type="button" class="topic-button active" data-category="all">ì „ì²´</button>
        <!-- data-categoryë¥¼ "AI / ML"ë¡œ í†µì¼ -->
        <button type="button" class="topic-button" data-category="AI / ML">AI / ML</button>
        <button type="button" class="topic-button" data-category="linguistics">ì–¸ì–´í•™</button>
        <button type="button" class="topic-button" data-category="literature">ë¬¸í•™</button>
        <button type="button" class="topic-button" data-category="philosophy">ì² í•™</button>
        <button type="button" class="topic-button" data-category="history">ì—­ì‚¬</button>
      </div>
    </nav>

    <!-- Topics ì•„ë˜ ê¸€ ë¦¬ìŠ¤íŠ¸ (ìµœì‹  5ê°œ) -->
    <section class="section" id="topics-section">
      <h2 class="section-title">ê¸€ ëª©ë¡</h2>
      <ul class="post-list" id="topics-post-list">
        <!-- posts.jsonì—ì„œ ë™ì ìœ¼ë¡œ ì±„ì›Œì§ -->
      </ul>
    </section>

    <!-- Today & Updates ì„¹ì…˜ -->
    <section class="section">
      <h2 class="section-title">Today & Updates</h2>
      <div class="section-grid">
        <div>
          <article class="featured">
            <div class="featured-label">ì˜¤ëŠ˜ì˜ ë°œì œ</div>
            <h3 class="featured-title">Attention Is All You Need (2017) â€” í•µì‹¬ ì•„ì´ë””ì–´ ì •ë¦¬</h3>
            <div class="post-meta">2025-11-10 Â· AI / ë…¼ë¬¸ ì½ê¸° Â· ì•½ 7ë¶„</div>
            <p class="summary-line">
              Self-attention ë©”ì»¤ë‹ˆì¦˜ê³¼ ì¸ì½”ë”-ë””ì½”ë” êµ¬ì¡°ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ, ê¸°ì¡´ RNN ê¸°ë°˜ ëª¨ë¸ê³¼ì˜ ì°¨ì´ì™€ ì¥ì ì„ ìš”ì•½í•©ë‹ˆë‹¤.
            </p>
          </article>

          <h3 class="section-subheading section-subheading--spaced">ìµœê·¼ ì‘ì„± ê¸€</h3>
          <ul class="post-list">
            <li class="post-item">
              <span class="post-item-title">ì–¸ì–´ ëª¨ë¸ì˜ â€œì˜ë¯¸ ì´í•´â€ëŠ” ë¬´ì—‡ì„ ì˜ë¯¸í•˜ë‚˜?</span>
              <span class="post-item-meta">2025-11-09 Â· AI, ì–¸ì–´ì² í•™ Â· 6ë¶„</span>
            </li>
            <li class="post-item">
              <span class="post-item-title">ë¹„íŠ¸ê²ìŠˆíƒ€ì¸ ã€ì² í•™ íƒêµ¬ã€ Â§1â€“20 ë°œì œ</span>
              <span class="post-item-meta">2025-11-08 Â· ì² í•™ Â· 8ë¶„</span>
            </li>
          </ul>
        </div>

        <div>
          <h3 class="section-subheading">ê³µì§€ì‚¬í•­</h3>
          <ul class="notice-list">
            <li class="notice-item">
              <span>ì—…ë¡œë“œ ê·œì¹™: â€œí•˜ë£¨ í•œ í¸â€ ì‹¤í—˜ ì‹œì‘</span>
              <span class="notice-meta">2025-11-01 Â· ë¸”ë¡œê·¸ ìš´ì˜</span>
            </li>
            <li class="notice-item">
              <span>ìƒˆ ì¹´í…Œê³ ë¦¬: â€œë…¼ë¬¸ í•œ ì¥ ìš”ì•½â€ ì¶”ê°€</span>
              <span class="notice-meta">2025-10-28 Â· ì¹´í…Œê³ ë¦¬ ì•ˆë‚´</span>
            </li>
          </ul>
        </div>
      </div>
    </section>

        <!-- Daily Study / Workout Log -->
    <section class="section" id="daily-log-section">
      <h2 class="section-title">Daily Study / Workout Log</h2>

      <div class="daily-log-layout">
        <!-- ìº˜ë¦°ë” íŒ¨ë„ -->
        <div class="daily-calendar-panel">
          <div class="daily-log-header">
            <button type="button" class="daily-log-nav" data-dir="prev">â†</button>
            <div class="daily-log-month-label" id="daily-log-month-label"></div>
            <button type="button" class="daily-log-nav" data-dir="next">â†’</button>
          </div>

          <div class="daily-calendar-grid" id="daily-calendar-grid">
            <!-- ìš”ì¼ í—¤ë” -->
            <div class="daily-calendar-day-label">ì¼</div>
            <div class="daily-calendar-day-label">ì›”</div>
            <div class="daily-calendar-day-label">í™”</div>
            <div class="daily-calendar-day-label">ìˆ˜</div>
            <div class="daily-calendar-day-label">ëª©</div>
            <div class="daily-calendar-day-label">ê¸ˆ</div>
            <div class="daily-calendar-day-label">í† </div>
            <!-- ë‚ ì§œ ì…€ì€ JSì—ì„œ ì±„ì›€ -->
          </div>

          <p class="daily-log-hint">
            Â· ì ì´ ìˆëŠ” ë‚ ì§œëŠ” ì¸ì¦ì´ ìˆëŠ” ë‚ ì…ë‹ˆë‹¤. ë‚ ì§œë¥¼ í´ë¦­í•˜ë©´ ì•„ë˜ í”¼ë“œê°€ í•´ë‹¹ ë‚ ì§œë¡œ í•„í„°ë§ë©ë‹ˆë‹¤.
          </p>
        </div>

        <!-- ì¸ìŠ¤íƒ€ê·¸ë¨ ìŠ¤íƒ€ì¼ í”¼ë“œ -->
        <div class="daily-feed-panel">
          <h3 class="section-subheading">Daily Feed</h3>
          <div class="daily-feed-grid" id="daily-feed-grid">
            <!-- JSë¡œ ì¸ë„¤ì¼ ì¹´ë“œ ë Œë”ë§ -->
          </div>
          <p class="daily-log-empty" id="daily-log-empty" hidden>
            ì•„ì§ ì—…ë¡œë“œëœ ì¸ì¦ì´ ì—†ìŠµë‹ˆë‹¤.
          </p>
          <p class="daily-log-selected-info" id="daily-log-selected-info" hidden></p>
        </div>
      </div>
    </section>
  </main>

  <!-- ì´ë¯¸ì§€/ê¸€ ìƒì„¸ ë³´ê¸° ëª¨ë‹¬ -->
  <div class="daily-log-modal-backdrop" id="daily-log-modal-backdrop">
    <div class="daily-log-modal" role="dialog" aria-modal="true" aria-labelledby="daily-log-modal-title">
      <button type="button" class="daily-log-modal-close" id="daily-log-modal-close">âœ•</button>
      <div class="daily-log-modal-image-wrap">
        <img src="" alt="" class="daily-log-modal-image" id="daily-log-modal-image" />
      </div>
      <div class="daily-log-modal-body">
        <h3 class="daily-log-modal-title" id="daily-log-modal-title"></h3>
        <p class="daily-log-modal-meta" id="daily-log-modal-meta"></p>
        <p class="daily-log-modal-text" id="daily-log-modal-text"></p>
      </div>
    </div>
  </div>

    
  </main>

  <!-- í‘¸í„° -->
  <footer>
    <div class="footer-inner">
      <div class="footer-row">
        <span>Â© <span id="year"></span> Study Notes. All rights reserved.</span>
        <span><a href="mailto:you@example.com">you@example.com</a></span>
      </div>
      <div class="footer-row">
        <span>ë§¤ì¼ í•œ í¸ ì—…ë¡œë“œë¥¼ ëª©í‘œë¡œ í•©ë‹ˆë‹¤.</span>
        <span><a href="#">RSS</a> Â· <a href="#">GitHub Repo</a> Â· <a href="#">CC BY-NC-SA</a></span>
      </div>
    </div>
  </footer>

  <script>
    // í‘¸í„° ì—°ë„ & ì‚¬ì´ë“œë°” í† ê¸€
    document.getElementById("year").textContent = new Date().getFullYear();
    const sidebar = document.querySelector(".sidebar");
    const backdrop = document.querySelector(".sidebar-backdrop");
    const menuToggle = document.querySelector(".menu-toggle");
    const menuClose = document.querySelector(".menu-close");

    function openSidebar() {
      sidebar.classList.add("open");
      backdrop.classList.add("visible");
    }
    function closeSidebar() {
      sidebar.classList.remove("open");
      backdrop.classList.remove("visible");
    }
    menuToggle.addEventListener("click", openSidebar);
    menuClose.addEventListener("click", closeSidebar);
    backdrop.addEventListener("click", closeSidebar);

    // ê¸€ ë°ì´í„° ë¡œë”© & ë Œë”ë§
    const TOPIC_ALL = "all";
    let postsData = [];

    function getSortedPosts() {
      return postsData
        .slice()
        .sort((a, b) => {
          const da = new Date(a.date || 0);
          const db = new Date(b.date || 0);
          return db - da;
        });
    }

    function filterPostsByCategory(category) {
      const sorted = getSortedPosts();
      if (!category || category === TOPIC_ALL) return sorted;
      return sorted.filter(post => post.category === category);
    }

    // Topics ì•„ë˜ ê¸€ ë¦¬ìŠ¤íŠ¸ ë Œë”ë§ (ìµœì‹  5ê°œ)
    function renderTopicPosts(category) {
      const listEl = document.getElementById("topics-post-list");
      if (!listEl) return;
      listEl.innerHTML = "";

      if (!postsData.length) {
        const li = document.createElement("li");
        li.className = "post-item";
        li.textContent = "ë¶ˆëŸ¬ì˜¨ ê¸€ì´ ì—†ìŠµë‹ˆë‹¤. posts/posts.jsonì„ í™•ì¸í•˜ì„¸ìš”.";
        listEl.appendChild(li);
        return;
      }

      const posts = filterPostsByCategory(category).slice(0, 5);
      if (!posts.length) {
        const li = document.createElement("li");
        li.className = "post-item";
        li.textContent = "ì´ í† í”½ì— í•´ë‹¹í•˜ëŠ” ê¸€ì´ ì•„ì§ ì—†ìŠµë‹ˆë‹¤.";
        listEl.appendChild(li);
        return;
      }

      posts.forEach(post => {
        const li = document.createElement("li");
        li.className = "post-item";

        const titleSpan = document.createElement("span");
        titleSpan.className = "post-item-title";
        const link = document.createElement("a");
        link.href = post.url || post.link || "#";
        link.textContent = post.title || "ì œëª© ì—†ìŒ";
        titleSpan.appendChild(link);

        const metaSpan = document.createElement("span");
        metaSpan.className = "post-item-meta";
        const parts = [];
        if (post.date) parts.push(post.date);
        if (post.category) parts.push(post.category);
        if (post.readingTime) parts.push(post.readingTime);
        metaSpan.textContent = parts.join(" Â· ");

        li.appendChild(titleSpan);
        li.appendChild(metaSpan);
        listEl.appendChild(li);
      });
    }

    // Topics ë²„íŠ¼ active ì²˜ë¦¬
    function setActiveTopicButton(activeCategory) {
      document.querySelectorAll(".topic-button").forEach(btn => {
        if (btn.dataset.category === activeCategory) {
          btn.classList.add("active");
        } else {
          btn.classList.remove("active");
        }
      });
    }

    function setupTopicButtons() {
      document.querySelectorAll(".topic-button").forEach(btn => {
        btn.addEventListener("click", () => {
          const category = btn.dataset.category || TOPIC_ALL;
          setActiveTopicButton(category);
          renderTopicPosts(category);
        });
      });
      setActiveTopicButton(TOPIC_ALL);
    }

    // ì‚¬ì´ë“œë°” ì¹´í…Œê³ ë¦¬ ê¸€ ëª©ë¡ ë Œë”ë§ (í˜„ì¬ëŠ” ì¹´í…Œê³ ë¦¬ í˜ì´ì§€ë¡œ ì´ë™)
    function renderSidebarCategoryPosts(category) {
      const container = document.getElementById("sidebar-category-posts");
      if (!container) return;
      container.innerHTML = "";

      if (!postsData.length) {
        const empty = document.createElement("div");
        empty.className = "sidebar-posts-empty";
        empty.textContent = "ë¶ˆëŸ¬ì˜¨ ê¸€ì´ ì—†ìŠµë‹ˆë‹¤. posts/posts.jsonì„ í™•ì¸í•˜ì„¸ìš”.";
        container.appendChild(empty);
        return;
      }

      const posts = filterPostsByCategory(category);
      if (!posts.length) {
        const empty = document.createElement("div");
        empty.className = "sidebar-posts-empty";
        empty.textContent = "ì´ ì¹´í…Œê³ ë¦¬ì˜ ê¸€ì´ ì•„ì§ ì—†ìŠµë‹ˆë‹¤.";
        container.appendChild(empty);
        return;
      }

      // ë„ˆë¬´ ê¸¸ì–´ì§€ì§€ ì•Šë„ë¡ ìµœëŒ€ 10ê°œë§Œ í‘œì‹œ
      posts.slice(0, 10).forEach(post => {
        const card = document.createElement("a");
        card.className = "sidebar-post-card";
        card.href = post.url || post.link || "#";

        if (post.thumbnail) {
          const img = document.createElement("img");
          img.className = "sidebar-post-thumb";
          img.src = post.thumbnail;
          img.alt = (post.title || "") + " ì¸ë„¤ì¼";
          card.appendChild(img);
        }

        const info = document.createElement("div");
        info.className = "sidebar-post-info";

        const titleEl = document.createElement("div");
        titleEl.className = "sidebar-post-title";
        titleEl.textContent = post.title || "ì œëª© ì—†ìŒ";

        const metaEl = document.createElement("div");
        metaEl.className = "sidebar-post-meta";
        const parts = [];
        if (post.date) parts.push(post.date);
        if (post.readingTime) parts.push(post.readingTime);
        metaEl.textContent = parts.join(" Â· ");

        info.appendChild(titleEl);
        info.appendChild(metaEl);
        card.appendChild(info);

        container.appendChild(card);
      });
    }

    function setActiveSidebarCategoryButton(activeCategory) {
      document.querySelectorAll(".sidebar-category-button").forEach(btn => {
        if (btn.dataset.category === activeCategory) {
          btn.classList.add("active");
        } else {
          btn.classList.remove("active");
        }
      });
    }

    function setupSidebarCategoryButtons() {
      document.querySelectorAll(".sidebar-category-button").forEach(btn => {
        btn.addEventListener("click", () => {
          const category = btn.dataset.category;
          const filename = "category-" + encodeURIComponent(category) + ".html";
          // categories í´ë”ë¡œ ê²½ë¡œ ì§€ì •
          window.location.href = "categories/" + filename;
        });
      });
    }

    // posts.json ë¡œë“œ
    function initPosts() {
      fetch("posts/posts.json")
        .then(response => response.json())
        .then(data => {
          // ë°°ì—´ ë˜ëŠ” { posts: [...] } ë‘˜ ë‹¤ ëŒ€ì‘ (ì¡°ê¸ˆ ë” ì•ˆì „í•˜ê²Œ)
          if (Array.isArray(data)) {
            postsData = data;
          } else if (Array.isArray(data?.posts)) {
            postsData = data.posts;
          } else {
            postsData = [];
          }
          renderTopicPosts(TOPIC_ALL); // ë°ì´í„° ë¡œë“œ í›„ ë‹¤ì‹œ ë Œë”
        })
        .catch(error => {
          console.error("posts.json ë¡œë“œ ì‹¤íŒ¨:", error);
          postsData = [];
          renderTopicPosts(TOPIC_ALL);
          alert("ê²Œì‹œê¸€ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. posts/posts.json íŒŒì¼ì„ í™•ì¸í•´ì£¼ì„¸ìš”.");
        });
    }

        // --- Daily Study / Workout Log ---

    const DAILY_LOG_CONFIG = {
      dataUrl: "daily/daily-logs.json", // ìƒˆë¡œ ë§Œë“¤ JSON íŒŒì¼ ê²½ë¡œ
    };

    let dailyEntries = [];
    let dailyCurrentYear;
    let dailyCurrentMonth; // 0-based (0 = January)
    let dailySelectedDate = null;

    function normalizeDateStr(dateStr) {
      // "2025-11-03T..." ê°™ì€ ê²ƒë„ "2025-11-03"ìœ¼ë¡œ í†µì¼
      return (dateStr || "").slice(0, 10);
    }

    function groupEntriesByDate(entries) {
      const map = {};
      entries.forEach(entry => {
        const key = normalizeDateStr(entry.date);
        if (!key) return;
        if (!map[key]) map[key] = [];
        map[key].push(entry);
      });
      return map;
    }

    function buildCalendar(year, month, entriesByDate) {
      const grid = document.getElementById("daily-calendar-grid");
      const monthLabel = document.getElementById("daily-log-month-label");
      if (!grid || !monthLabel) return;

      // ê¸°ì¡´ ë‚ ì§œ ì…€ ì œê±° (ìš”ì¼ í—¤ë” 7ê°œë§Œ ë‚¨ê¸°ê³ )
      while (grid.children.length > 7) {
        grid.removeChild(grid.lastChild);
      }

      const firstDay = new Date(year, month, 1);
      const startWeekday = firstDay.getDay(); // 0 = Sun
      const lastDayNum = new Date(year, month + 1, 0).getDate();

      monthLabel.textContent = `${year}. ${(month + 1).toString().padStart(2, "0")}`;

      // ì•ìª½ ë¹ˆ ì…€
      for (let i = 0; i < startWeekday; i++) {
        const emptyCell = document.createElement("div");
        emptyCell.className = "daily-calendar-cell empty";
        grid.appendChild(emptyCell);
      }

      // ë‚ ì§œ ì…€
      for (let day = 1; day <= lastDayNum; day++) {
  // ğŸ”¥ Date ê°ì²´ë¡œ ISO ë¬¸ìì—´ ë§Œë“¤ì§€ ë§ê³ , ì§ì ‘ YYYY-MM-DD í˜•ì‹ìœ¼ë¡œ ì¡°í•©
  const y = String(year);
  const m = String(month + 1).padStart(2, "0"); // monthëŠ” 0ë¶€í„° ì‹œì‘í•˜ë‹ˆê¹Œ +1
  const d = String(day).padStart(2, "0");
  const dateStr = `${y}-${m}-${d}`;

  const hasEntry = !!entriesByDate[dateStr];

  const cell = document.createElement("button");
  cell.type = "button";
  cell.className = "daily-calendar-cell";
  cell.dataset.date = dateStr;
  cell.textContent = String(day);

  if (hasEntry) {
    cell.classList.add("has-entry");
  }

  if (dailySelectedDate === dateStr) {
    cell.classList.add("selected");
  }

  cell.addEventListener("click", () => {
    if (dailySelectedDate === dateStr) {
      dailySelectedDate = null;
    } else {
      dailySelectedDate = dateStr;
    }
    renderDailyFeed();
    document.querySelectorAll(".daily-calendar-cell").forEach(c => {
      if (c.dataset.date === dailySelectedDate) {
        c.classList.add("selected");
      } else {
        c.classList.remove("selected");
      }
    });
  });

  grid.appendChild(cell);
}

    }

    function renderDailyFeed() {
      const container = document.getElementById("daily-feed-grid");
      const emptyEl = document.getElementById("daily-log-empty");
      const selectedInfoEl = document.getElementById("daily-log-selected-info");
      if (!container || !emptyEl || !selectedInfoEl) return;

      container.innerHTML = "";

      let visibleEntries = dailyEntries.slice();

      if (dailySelectedDate) {
        const normalized = normalizeDateStr(dailySelectedDate);
        visibleEntries = visibleEntries.filter(
          entry => normalizeDateStr(entry.date) === normalized
        );
        selectedInfoEl.hidden = false;
        selectedInfoEl.textContent = `${normalized} ì¸ì¦ë§Œ í‘œì‹œ ì¤‘ì…ë‹ˆë‹¤. (ë‹¤ì‹œ ë‚ ì§œë¥¼ ëˆ„ë¥´ë©´ ì „ì²´ ë³´ê¸°)`;
      } else {
        selectedInfoEl.hidden = true;
      }

      if (!visibleEntries.length) {
        emptyEl.hidden = false;
        return;
      }

      emptyEl.hidden = true;

      visibleEntries.forEach(entry => {
        const card = document.createElement("button");
        card.type = "button";
        card.className = "daily-feed-item";
        card.dataset.date = normalizeDateStr(entry.date || "");

        const thumbWrap = document.createElement("div");
        thumbWrap.className = "daily-feed-thumb-wrap";

        if (entry.image) {
          const img = document.createElement("img");
          img.className = "daily-feed-thumb";
          img.src = entry.image;
          img.alt = (entry.title || "") + " ì¸ë„¤ì¼";
          thumbWrap.appendChild(img);
        } else {
          const placeholder = document.createElement("div");
          placeholder.className = "daily-feed-thumb placeholder";
          placeholder.textContent = "No Image";
          thumbWrap.appendChild(placeholder);
        }

        const meta = document.createElement("div");
        meta.className = "daily-feed-meta";

        const titleEl = document.createElement("div");
        titleEl.className = "daily-feed-title";
        titleEl.textContent = entry.title || "ì œëª© ì—†ìŒ";

        const dateEl = document.createElement("div");
        dateEl.className = "daily-feed-date";
        const parts = [];
        if (entry.date) parts.push(normalizeDateStr(entry.date));
        if (entry.type) parts.push(entry.type);
        meta.appendChild(titleEl);
        dateEl.textContent = parts.join(" Â· ");

        meta.appendChild(dateEl);

        card.appendChild(thumbWrap);
        card.appendChild(meta);

        card.addEventListener("click", () => openDailyModal(entry));

        container.appendChild(card);
      });
    }

    function openDailyModal(entry) {
      const backdrop = document.getElementById("daily-log-modal-backdrop");
      const imgEl = document.getElementById("daily-log-modal-image");
      const titleEl = document.getElementById("daily-log-modal-title");
      const metaEl = document.getElementById("daily-log-modal-meta");
      const textEl = document.getElementById("daily-log-modal-text");
      if (!backdrop || !imgEl || !titleEl || !metaEl || !textEl) return;

      if (entry.image) {
        imgEl.src = entry.image;
        imgEl.alt = (entry.title || "") + " ì´ë¯¸ì§€";
      } else {
        imgEl.src = "";
        imgEl.alt = "";
      }

      titleEl.textContent = entry.title || "ì œëª© ì—†ìŒ";

      const parts = [];
      if (entry.date) parts.push(normalizeDateStr(entry.date));
      if (entry.type) parts.push(entry.type);
      metaEl.textContent = parts.join(" Â· ");

      textEl.textContent = entry.text || "";

      backdrop.classList.add("open");
    }

    function closeDailyModal() {
      const backdrop = document.getElementById("daily-log-modal-backdrop");
      if (!backdrop) return;
      backdrop.classList.remove("open");
    }

    function setupDailyModalEvents() {
      const backdrop = document.getElementById("daily-log-modal-backdrop");
      const closeBtn = document.getElementById("daily-log-modal-close");
      if (!backdrop || !closeBtn) return;

      closeBtn.addEventListener("click", closeDailyModal);
      backdrop.addEventListener("click", event => {
        if (event.target === backdrop) {
          closeDailyModal();
        }
      });

      document.addEventListener("keydown", event => {
        if (event.key === "Escape") {
          closeDailyModal();
        }
      });
    }

    function setupDailyMonthNav(entriesByDate) {
      const prevBtn = document.querySelector(".daily-log-nav[data-dir='prev']");
      const nextBtn = document.querySelector(".daily-log-nav[data-dir='next']");
      if (!prevBtn || !nextBtn) return;

      function rerender() {
        buildCalendar(dailyCurrentYear, dailyCurrentMonth, entriesByDate);
      }

      prevBtn.addEventListener("click", () => {
        if (dailyCurrentMonth === 0) {
          dailyCurrentMonth = 11;
          dailyCurrentYear -= 1;
        } else {
          dailyCurrentMonth -= 1;
        }
        rerender();
      });

      nextBtn.addEventListener("click", () => {
        if (dailyCurrentMonth === 11) {
          dailyCurrentMonth = 0;
          dailyCurrentYear += 1;
        } else {
          dailyCurrentMonth += 1;
        }
        rerender();
      });
    }

    function initDailyLog() {
      const today = new Date();
      dailyCurrentYear = today.getFullYear();
      dailyCurrentMonth = today.getMonth();

      setupDailyModalEvents();

      fetch(DAILY_LOG_CONFIG.dataUrl)
        .then(resp => resp.json())
        .then(data => {
          if (Array.isArray(data)) {
            dailyEntries = data;
          } else if (Array.isArray(data?.entries)) {
            dailyEntries = data.entries;
          } else {
            dailyEntries = [];
          }

          // ìµœê·¼ ë‚ ì§œ ê¸°ì¤€ìœ¼ë¡œ ì†ŒíŒ… (ê°€ì¥ ìµœê·¼ ê²ƒì´ ì•ì— ì˜¤ë„ë¡)
          dailyEntries.sort((a, b) => {
            const da = (a.date || "");
            const db = (b.date || "");
            return db.localeCompare(da); // ìµœì‹  ë‚ ì§œê°€ ì•ì— ì˜¤ë„ë¡
          });

          const entriesByDate = groupEntriesByDate(dailyEntries);
          buildCalendar(dailyCurrentYear, dailyCurrentMonth, entriesByDate);
          setupDailyMonthNav(entriesByDate);
          renderDailyFeed();
        })
        .catch(error => {
          console.error("daily-logs.json ë¡œë“œ ì‹¤íŒ¨:", error);
          dailyEntries = [];
          renderDailyFeed();
        });
    }

    
    // ì´ˆê¸°í™”
    setupTopicButtons();
    setupSidebarCategoryButtons();
    renderTopicPosts(TOPIC_ALL); // ë°ì´í„° ë¡œë”© ì „ ê¸°ë³¸ ë©”ì‹œì§€
    initPosts();
    initDailyLog(); // â† Daily Log ì´ˆê¸°í™”
  </script>

</body>
</html>
